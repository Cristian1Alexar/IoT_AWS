var ws=new WebSocket("ws://localhost:8080");ws.addEventListener("open",function(){ws.send("Conectado!")});var res,door=document.getElementById("door"),led1={on:document.getElementById("led1on"),off:document.getElementById("led1off"),no:1},led2={on:document.getElementById("led2on"),off:document.getElementById("led2off"),no:2},led3={on:document.getElementById("led3on"),off:document.getElementById("led3off"),no:3};opendoor={action:"request",door:1,angle:90,led:5},ledon={action:"request",door:0,angle:0,led:1},ledoff={action:"request",door:0,angle:0,led:0},respuesta={message:" "},door.addEventListener("click",function(){door.className="btn on",ws.send(JSON.stringify(opendoor))}),led1.on.addEventListener("click",function(){led1.on.className="btn on",led1.off.className="btn btn-secondary",ledon.led=led1.no,console.log(ledon),ws.send(JSON.stringify(ledon))}),led1.off.addEventListener("click",function(){led1.off.className="btn off",led1.on.className="btn btn-secondary",console.log(ledoff),ws.send(JSON.stringify(ledoff))}),led2.on.addEventListener("click",function(){led2.on.className="btn on",led2.off.className="btn btn-secondary",ledon.led=led2.no,console.log(ledon)}),led2.off.addEventListener("click",function(){led2.off.className="btn off",led2.on.className="btn btn-secondary"}),led3.on.addEventListener("click",function(){led3.on.className="btn on",led3.off.className="btn btn-secondary"}),led3.off.addEventListener("click",function(){led3.off.className="btn off",led3.on.className="btn btn-secondary"}),ws.onmessage=function(e){var n,o=JSON.parse(e.data);null!=o.photocell&&(n=parseInt(o.photocell)/59,document.getElementById("distance").innerHTML=o.photocell,n.toPrecision(3),document.getElementById("distance").innerHTML="Distancia: "+n.toString()+" cm"),null==o.photocell&&(document.getElementById("doorlabel").innerHTML="Puerta Abierta",door.className="btn on",setTimeout(function(){document.getElementById("doorlabel").innerHTML="Puerta Cerrada",door.className="btn"},5e3))};